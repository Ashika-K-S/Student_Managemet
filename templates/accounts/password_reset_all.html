{% extends "base.html" %}
{% block title %}Password Reset{% endblock %}

{% block content %}
<div class="container mt-4" style="max-width: 420px;">

  <h4 class="mb-3 text-center">Password Reset</h4>

  {# ---- STEP 1: ENTER EMAIL ---- #}
  {% if form and not validlink %}
    <p class="text-muted text-center">
      Enter your registered email to receive a reset link.
    </p>

    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button class="btn btn-primary w-100">Send Reset Link</button>
    </form>

  {# ---- STEP 2: EMAIL SENT ---- #}
  {% elif not form and not validlink %}
    <p class="text-success text-center">
      If an account with that email exists, a reset link has been sent.
    </p>

  {# ---- STEP 3: SET NEW PASSWORD ---- #}
  {% elif validlink %}
    <p class="text-muted text-center">
      Enter your new password below.
    </p>

    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button class="btn btn-success w-100">Reset Password</button>
    </form>

  {# ---- STEP 4: DONE ---- #}
  {% else %}
    <p class="text-success text-center">
      Your password has been reset successfully.
    </p>

    <a href="{% url 'accounts:login' %}" class="btn btn-primary w-100">
      Login
    </a>
  {% endif %}

</div>
{% endblock %}

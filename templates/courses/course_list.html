{% extends "base.html" %}
{% block title %}Courses{% endblock %}

{% block content %}
<h2 class="fw-bold mb-3">Courses</h2>

{% if user.is_admin %}
  <a href="{% url 'courses:course_create' %}" class="btn btn-success mb-3">Create Course</a>
{% endif %}

<table class="table table-bordered bg-white shadow-sm">
  <thead class="table-dark">
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for c in courses %}
      <tr>
        <td>{{ c.title }}</td>
        <td>{{ c.description|truncatewords:15 }}</td>
        <td>
          {% if user.is_admin %}
            <a href="{% url 'courses:course_edit' c.id %}" class="btn btn-warning btn-sm">Edit</a>
            <a href="{% url 'courses:course_delete' c.id %}" class="btn btn-danger btn-sm">Delete</a>
          {% else %}
            <a href="{% url 'courses:enroll_in_course' c.id %}" class="btn btn-success btn-sm">Enroll</a>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
